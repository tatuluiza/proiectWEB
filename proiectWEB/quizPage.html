<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>Discover Your Perfect Skincare Routine</title>
  
</head>
<body>
    <div class="fixed-top">
        <div  class="logo col-4">
            <img src="assets/logoHome.jpg" alt="" >
        </div>
        
       
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      
        <div class="icons">
          <a href="./home.html"><img src="assets/iconH.jpg" alt="" class="col" title="Home"></a> 
           <!-- <a href="./contactUs.html"><img src="assets/contact.jpg" alt="" class="col" title="Contact"></a> -->
           <div class="dropdown" id="dropdownMenu">
            <img src="assets/more.png" alt="" class="col dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="More...">
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="./quizPage.html">Make the quiz</a>  
              <a class="dropdown-item" href="./aboutUs.html">About us</a>  
              <a class="dropdown-item" href="./review.html">Review</a>
              <a class="dropdown-item" href="./myRoutine.html">My Routine</a>
            </div>
        </div>
        </div>
      
    </nav>
      </div>
    <h1 class="text-center">Discover Your Perfect Skincare Routine</h1>
    
    <form id="myForm" class="container">
        <div class="mb-3">
            <label for="ageGroup" class="form-label">Age Group:</label>
            <select id="ageGroup" name="ageGroup" class="form-select">
                <option value="18-25">18-25</option>
                <option value="26-35">26-35</option>
                <option value="36-45">36-45</option>
                <option value="46+">46+</option>
            </select>
        </div>
    
        <div class="mb-3">
            <label for="skinType" class="form-label">Skin Type:</label>
            <select id="skinType" name="skinType" class="form-select">
                <option value="Dry">Dry</option>
                <option value="Oily">Oily</option>
                <option value="Combination">Combination (Both dry and oily areas)</option>
                <option value="Normal">Normal (Balanced)</option>
            </select>
        </div>
    
        <div class="mb-3">
            <label for="mainConcern" class="form-label">Main Concern:</label>
            <select id="mainConcern" name="mainConcern" class="form-select">
                <option value="Acne" data-tags="purpicks">Acne or Breakouts</option>
                <option value="Dryness" data-tags="Gluten Free">Dryness or Dehydration</option>
                <option value="FineLines" data-tags="Natural">Fine Lines and Wrinkles</option>
                <option value="UnevenSkin" data-tags="Vegan">Uneven Skin Tone</option>
                <option value="Sensitivity" data-tags="Hypoallergenic">Sensitivity or Redness</option>
            </select>
        </div>
    
        <div class="mb-3">
            <label for="sunExposure" class="form-label">Sun Exposure:</label>
            <select id="sunExposure" name="sunExposure" class="form-select">
                <option value="Rarely">Rarely (Indoors most of the time)</option>
                <option value="Occasionally">Occasionally (Some outdoor activities)</option>
                <option value="Regularly">Regularly (Daily outdoor exposure)</option>
            </select>
        </div>
    
        <div class="mb-3">
            <label for="skincareRoutine" class="form-label">Current Skincare Routine:</label>
            <select id="skincareRoutine" name="skincareRoutine" class="form-select">
                <option value="Simple">Simple: Just a cleanser and moisturizer</option>
                <option value="Basic">Basic: Cleanser, moisturizer, and sunscreen</option>
                <option value="Comprehensive">Comprehensive: Cleanser, toner, serum, moisturizer, sunscreen, and occasional masks/exfoliants</option>
            </select>
        </div>
              
        <div class="mb-3">
            <label for="makeupUse" class="form-label">Frequency of Makeup Use:</label>
            <select id="makeupUse" name="makeupUse" class="form-select">
                <option value="Rarely">Rarely</option>
                <option value="Occasionally">Occasionally</option>
                <option value="Daily">Daily</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="skinCondition" class="form-label">Current Skin Condition:</label>
            <select id="skinCondition" name="skinCondition" class="form-select">
                <option value="Clear">Clear and smooth</option>
                <option value="Blemishes">Some blemishes or imperfections</option>
                <option value="Dryness">Dry patches or flakiness</option>
                <option value="UnevenTexture">Uneven texture or tone</option>
                <option value="Sensitivity">Sensitivity or irritation</option>
            </select>
        </div>
            
        <div class="mb-3">
            <label for="stressLevel" class="form-label">Stress Level:</label>
            <select id="stressLevel" name="stressLevel" class="form-select">
                <option value="Low">Low (minimal stress)</option>
                <option value="Moderate">Moderate (manageable stress)</option>
                <option value="High">High (significant stress)</option>
                <option value="VeryHigh">Very high (overwhelming stress)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="dietaryHabits" class="form-label">Dietary Habits:</label>
            <select id="dietaryHabits" name="dietaryHabits" class="form-select">
                <option value="Processed">Mostly processed foods</option>
                <option value="Balanced">Balanced with fruits and vegetables</option>
                <option value="FruitsVegetables">Mostly fruits and vegetables, minimal processed foods</option>
                <option value="Healthy">Strictly healthy, organic, and balanced</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="exerciseRoutine" class="form-label">Exercise Routine:</label>
            <select id="exerciseRoutine" name="exerciseRoutine" class="form-select">
                <option value="Rarely">Rarely or never</option>
                <option value="Occasionally">Occasionally (1-2 times a week)</option>
                <option value="Regularly">Regularly (3-5 times a week)</option>
                <option value="Daily">Daily</option>
            </select>
        </div>

        <button type="button" onclick="saveFormData()" class="btn btn-dark">Submit</button>
    </form>
    <div class="modal fade" id="randomItemsModal" tabindex="-1" aria-labelledby="randomItemsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="randomItemsModalLabel">Randomly Selected Items</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="randomItemsModalBody">
              <!-- Item information will be populated here -->
            </div>
          </div>
        </div>
      </div>
    <div id="footer"></div>
    <script src="./quiz.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      
    <script>
       function saveFormData() {
    // Get the selected main concern option
    var mainConcernSelect = document.getElementById('mainConcern');
    var selectedOption = mainConcernSelect.options[mainConcernSelect.selectedIndex];

    // Get the data-tags attribute value from the selected option
    var tags = selectedOption.getAttribute('data-tags');
    console.log(tags);

    // Construct the API URL with the tags
    var apiUrl = 'http://makeup-api.herokuapp.com/api/v1/products.json?';
    if (tags) {
      apiUrl += 'product_tags=' + tags;
    }

    // Make a GET request to the API
    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        // Handle the API response data here
        console.log(data);
        const randomItems = getRandomItems(data);
        console.log(randomItems);
        localStorage.setItem('randomItems', JSON.stringify(randomItems));

// Redirect the user to the products page
window.location.href = './myRoutine.html';
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  }

  function getRandomItemFromCategory(data, category) {
    // Filter the data based on the given category
    const filteredData = data.filter(item => item.product_type === category);

    // If there are no items in the given category, return null
    if (filteredData.length === 0) {
      return null;
    }

    // Select a random index within the range of the filtered data array
    const randomIndex = Math.floor(Math.random() * filteredData.length);

    // Return the randomly selected item
    return filteredData[randomIndex];
  }

  function getRandomItems(data) {
    // Define categories you want to retrieve
    const categories = ['foundation', 'mascara', 'pencil', 'palette', 'lipstick', 'eyeliner'];

    // Initialize an object to store the randomly selected items
    const randomItems = {};

    // Loop through each category and select one random item from each
    categories.forEach(category => {
      const randomItem = getRandomItemFromCategory(data, category);
      // Add the randomly selected item to the object
      if (randomItem) {
        randomItems[category] = randomItem;
      }
    });

    // Return the object containing randomly selected items
    return randomItems;
  }

  
      </script>
    
</body>
</html>
